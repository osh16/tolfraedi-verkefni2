---
title: "Seinna R Verkefni"
authors: "Óskar Höskuldsson (osh16@hi.is) og Viktor Sigbjörn Víðisson (vsv8@hi.is)"
output: html_document
---

```{r setup, include=FALSE, warning = F, message = F}
knitr::opts_chunk$set(echo = TRUE)
options(warn=-1)
options(scipen=999)
library(utf8)
library(ggplot2)
library(forcats)
library(dplyr)
options(warn=-1)
```

a)
Búið til verkefni (e. Project) í vinnumöppunni ykkar og nefnið það seinna_r_verkefni.

b)
Lesið gagnaskrána husnaedisverd_2017.csv inn í R/RStudio og geymið í hlut sem ber upphafsstafi þeirra sem verkefnið vinna (ef Gréta Halldórsdóttir og Sigurður Jónsson eru að vinna saman skulu þau nefna hlutinn gs en ef Atli Pétursson er að vinna einn skal hann nefna hlutinn sinn ap). Kannið gerð breytanna og breytið gerð þeirra sem eru ekki af réttri gerð (ef einhverjar).

```{r}
ov <- read.table("husnaedisverd_2017.csv", header=TRUE, sep=";")
```

c)
Breytan kaupverd er í þúsundum króna, breytið henni þannig að hún verði í krónum.

```{r}
ov$kaupverd = ov$kaupverd*1000
```

d)
Búið til nýja breytu í gagnarammanum ykkar sem inniheldur fermetraverð eignanna, nefnið breytuna fermetraverd.

```{r}
ov$fermetraverd = ov$kaupverd/ov$birtm2
```

e)
Búið til nýja breytu sem þið skulið kalla teg_eign_groft sem byggir á teg_eign breytunni. Breytan á að innihalda tvo flokka: Sérbýli (Einbýlishús, Parhús, Raðhús) og Íbúð (Íbúðareign). Ábending: notið fct_recode() aðferðina.

```{r}
ov$teg_eign_groft <- forcats::fct_recode(ov$teg_eign, Sérbýli="Einbýlishús", Sérbýli="Parhús", Sérbýli="Raðhús", Íbúð="Íbúðareign")
```

f)
Búið til nýja gagnagrind (dataframe) sem inniheldur eignir úr þremur hverfum í Reykjavík og kallið hana rvk. Þið veljið hvaða hverfi sjálf en hverfin sem þið veljið þurfa að innihalda a.m.k. 200 eignir, þarf af 30 sérbýli.

```{r}
hverfi <- c(80,330,800)
rvk <- dplyr::filter(ov, matssvaedi%in%hverfi)
```

g)
Breytið matssvaedi breytunni í rvk gagnarammanum í flokkabreytu og nefnið flokkana með heiti hverfanna.

```{r}
rvk$matssvaedi[rvk$matssvaedi == 80] = "Hlíðar"
rvk$matssvaedi[rvk$matssvaedi == 330] = "Kópavogur:Hjallar,Smárar"
rvk$matssvaedi[rvk$matssvaedi == 800] = "Mosfellsbær"
rvk$matssvaedi = factor(rvk$matssvaedi, levels=c("Hlíðar","Kópavogur:Hjallar,Smárar","Mosfellsbær"))
```

h)
Hugsum okkur nú að eignirnar í rvk gagnarammanum ykkar sé þýðið ykkar. Nú ætlum við að taka úrtak úr þýðinu, 100 eignir úr hverju hverfi.

```{r}

```

i)
Búið til töflu sem sýnir hlutfall sérbýla og íbúða í hverfunum þremur. Það á s.s. að vera hægt að lesa hver hlutföll sérbýla og íbúða er í hverju hverfi fyrir sig.

```{r}

```

j)
Kannið með kí-kvaðrat prófi hvort marktækur munur sé á hlutfalli sérbýla í hverfunum þremur. Sýnið úttakið úr prófinu. Setjið tilgátunar fram formlega. Sýnið úttakið úr prófinu. Tilgreinið gildið á prófstærðinni, p-gildið og hvaða ályktun þið dragið í samfelldu máli.

```{r}

```

k)
Hvaða forsendur þurfa að vera uppfylltar svo framkvæma megi kí-kvaðrat próf? Eru forsendurnar uppfylltar í prófinu í j-lið?

```{r}

```

l)
Teiknið mynd sem sýnir fermetraverð eftir tegund eigna (sérbýli-íbúðir). Hér á að nota gögnin úr hverfunum ykkar þremur en ekki að skipta upp eftir hverfunum.

```{r}

```

m)
Kannið með viðeigandi tilgátuprófi hvort munur sé á meðalfermetrverði sérbýla og íbúða. Hér eigið þið að nota gögnin úr hverfunum ykkar þremur en ekki skipta þeim upp eftir hverfunum. Setjið tilgáturnar fram formlega. Sýnið úttakið úr prófinu. Tilgreinið gildið á prófstærðinni, p-gildið og hvaða ályktun þið dragið í samfelldu máli.

```{r}

```

n)
Smíðið 95% öryggisbil fyrir mismun á meðaltölum sérbýla og einbýla. Setjið öryggisbilið fram á formlegan hátt.

```{r}

```

o)
Teiknið mynd sem sýnir fermetraverð íbúða eftir hverfnum þremur.

```{r}

```

p)
Kannið með viðeigandi tilgátuprófi hvort munur sé á meðalfermetrverði íbúða eftir hverunum þremur. Setjið tilgáturnar fram formlega. Sýnið úttakið. Tilgreinið gildið á prófstærðinni, p-gildið og hvaða ályktun þið dragið í samfelldu máli.

```{r}

```

q)
Teiknið mynd sem sýnir sambandið á milli stærðar og verðs íbúðaeignanna í hverfunum ykkar þremur.

```{r}

```

r)
Smíðið aðhvarfsgreiningarlíkan sem nota má til að spá fyrir um verð eigna út frá stærð. Hér eigið þið að nota gögnin úr hverfunum ykkar þremur en ekki skipta þeim upp eftir hverfunum. Sýnið úttakið. Tilgreinið í textanum hvert matið ykkar á skurðpunktinum og hallatölunni eru. Segið með örfáum orðum hvort þið teljið skynsamlegt að nota líkan sem þetta til að spá fyrir um verð út frá stærð eignanna.

```{r}

```


